<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="effect_plot() plots regression paths. The plotting is done with
ggplot2 rather than base graphics, which some similar functions use."><title>Plot simple effects in regression models — effect_plot • jtools</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><link href="../deps/Lato-0.4.6/font.css" rel="stylesheet"><link href="../deps/IBM_Plex_Mono-0.4.6/font.css" rel="stylesheet"><link href="../deps/Raleway-0.4.6/font.css" rel="stylesheet"><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Plot simple effects in regression models — effect_plot"><meta property="og:description" content="effect_plot() plots regression paths. The plotting is done with
ggplot2 rather than base graphics, which some similar functions use."><meta property="og:image" content="/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">jtools</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.2.2</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">
    <span class="fa fa-newspaper-o"></span>
     
    News
  </a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">
    <span class="fa fa-file-code-o"></span>
     
    Documentation
  </a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown--vignettes">
    <span class="fa fa-book"></span>
     
    Vignettes
  </a>
  <div class="dropdown-menu" aria-labelledby="dropdown--vignettes">
    <a class="dropdown-item" href="../articles/summ.html">Tools for summarizing and visualizing regression models</a>
    <a class="dropdown-item" href="../articles/effect_plot.html">Visualizing regression model predictions</a>
    <a class="dropdown-item" href="../articles/svycor.html">Calculate correlations and correlation tables with complex survey data</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/jacob-long/jtools">
    <span class="fa fa-github fa-lg"></span>
     
    Github
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Plot simple effects in regression models</h1>
      <small class="dont-index">Source: <a href="https://github.com/jacob-long/jtools/blob/HEAD/R/effect_plot.R" class="external-link"><code>R/effect_plot.R</code></a></small>
      <div class="d-none name"><code>effect_plot.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>effect_plot()</code> plots regression paths. The plotting is done with
<code>ggplot2</code> rather than base graphics, which some similar functions use.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">effect_plot</span><span class="op">(</span></span>
<span>  <span class="va">model</span>,</span>
<span>  <span class="va">pred</span>,</span>
<span>  pred.values <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  centered <span class="op">=</span> <span class="st">"all"</span>,</span>
<span>  plot.points <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  interval <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  data <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  at <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  int.type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"confidence"</span>, <span class="st">"prediction"</span><span class="op">)</span>,</span>
<span>  int.width <span class="op">=</span> <span class="fl">0.95</span>,</span>
<span>  outcome.scale <span class="op">=</span> <span class="st">"response"</span>,</span>
<span>  robust <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  cluster <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  vcov <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  set.offset <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  x.label <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  y.label <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  pred.labels <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  main.title <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  colors <span class="op">=</span> <span class="st">"black"</span>,</span>
<span>  line.colors <span class="op">=</span> <span class="va">colors</span>,</span>
<span>  line.thickness <span class="op">=</span> <span class="fl">1.1</span>,</span>
<span>  point.size <span class="op">=</span> <span class="fl">1.5</span>,</span>
<span>  point.alpha <span class="op">=</span> <span class="fl">0.6</span>,</span>
<span>  jitter <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  rug <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  rug.sides <span class="op">=</span> <span class="st">"lb"</span>,</span>
<span>  force.cat <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  cat.geom <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"point"</span>, <span class="st">"line"</span>, <span class="st">"bar"</span><span class="op">)</span>,</span>
<span>  cat.interval.geom <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"errorbar"</span>, <span class="st">"linerange"</span><span class="op">)</span>,</span>
<span>  cat.pred.point.size <span class="op">=</span> <span class="fl">3.5</span>,</span>
<span>  partial.residuals <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  color.class <span class="op">=</span> <span class="va">colors</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>model</dt>
<dd><p>A regression model. The function is tested with <code>lm</code>,
<code>glm</code>, <code><a href="https://rdrr.io/pkg/survey/man/svyglm.html" class="external-link">svyglm</a></code>,
<code><a href="https://rdrr.io/pkg/lme4/man/merMod-class.html" class="external-link">merMod</a></code>,
<code><a href="https://rdrr.io/pkg/quantreg/man/rq.html" class="external-link">rq</a></code>, <code>brmsfit</code>,
<code>stanreg</code> models.
Models from other classes may work as well but are not officially
supported. The model should include the interaction of interest.</p></dd>


<dt>pred</dt>
<dd><p>The name of the predictor variable involved
in the interaction. This can be a bare name or string. Note that it
is evaluated using <code>rlang</code>, so programmers can use the <code>!!</code> syntax
to pass variables instead of the verbatim names.</p></dd>


<dt>pred.values</dt>
<dd><p>Values of <code>pred</code> to use instead of the equi-spaced
series by default (for continuous variables) or all unique values (for
non-continuous variables).</p></dd>


<dt>centered</dt>
<dd><p>A vector of quoted variable names that are to be
mean-centered. If <code>"all"</code>, all non-focal predictors are centered. You
may instead pass a character vector of variables to center. User can
also use "none" to base all predictions on variables set at 0.
The response variable, <code>pred</code>, weights, and offset variables are never
centered.</p></dd>


<dt>plot.points</dt>
<dd><p>Logical. If <code>TRUE</code>, plots the actual data points as
a scatterplot on top of the interaction lines. The color of the dots will
be based on their moderator value.</p></dd>


<dt>interval</dt>
<dd><p>Logical. If <code>TRUE</code>, plots confidence/prediction
intervals around the line using <code><a href="https://ggplot2.tidyverse.org/reference/geom_ribbon.html" class="external-link">geom_ribbon</a></code>.</p></dd>


<dt>data</dt>
<dd><p>Optional, default is NULL. You may provide the data used to
fit the model. This can be a better way to get mean values for centering
and can be crucial for models with variable transformations in the formula
(e.g., <code>log(x)</code>) or polynomial terms (e.g., <code>poly(x, 2)</code>). You will
see a warning if the function detects problems that would likely be
solved by providing the data with this argument and the function will
attempt to retrieve the original data from the global environment.</p></dd>


<dt>at</dt>
<dd><p>If you want to manually set the values of other variables in the
model, do so by providing a named list where the names are the variables
and the list values are vectors of the values. This can be useful
especially when you are exploring interactions or other conditional
predictions.</p></dd>


<dt>int.type</dt>
<dd><p>Type of interval to plot. Options are "confidence" or
"prediction". Default is confidence interval.</p></dd>


<dt>int.width</dt>
<dd><p>How large should the interval be, relative to the standard
error? The default, .95, corresponds to roughly 1.96 standard errors and
a .05 alpha level for values outside the range. In other words, for a
confidence interval, .95 is analogous to a 95% confidence interval.</p></dd>


<dt>outcome.scale</dt>
<dd><p>For nonlinear models (i.e., GLMs), should the outcome
variable be plotted on the link scale (e.g., log odds for logit models) or
the original scale (e.g., predicted probabilities for logit models)? The
default is <code>"response"</code>, which is the original scale. For the link
scale, which will show straight lines rather than curves, use
<code>"link"</code>.</p></dd>


<dt>robust</dt>
<dd><p>Should robust standard errors be used to find confidence
intervals for supported models? Default is FALSE, but you should specify
the type of sandwich standard errors if you'd like to use them (i.e.,
<code>"HC0"</code>, <code>"HC1"</code>, and so on). If <code>TRUE</code>, defaults to <code>"HC3"</code> standard
errors.</p></dd>


<dt>cluster</dt>
<dd><p>For clustered standard errors, provide the column name of
the cluster variable in the input data frame (as a string). Alternately,
provide a vector of clusters.</p></dd>


<dt>vcov</dt>
<dd><p>Optional. You may supply the variance-covariance matrix of the
coefficients yourself. This is useful if you are using some method for
robust standard error calculation not supported by the <span class="pkg">sandwich</span>
package.</p></dd>


<dt>set.offset</dt>
<dd><p>For models with an offset (e.g., Poisson models), sets an
offset for the predicted values. All predicted values will have the same
offset. By default, this is set to 1, which makes the predicted values a
proportion. See details for more about offset support.</p></dd>


<dt>x.label</dt>
<dd><p>A character object specifying the desired x-axis label. If
<code>NULL</code>, the variable name is used.</p></dd>


<dt>y.label</dt>
<dd><p>A character object specifying the desired x-axis label. If
<code>NULL</code>, the variable name is used.</p></dd>


<dt>pred.labels</dt>
<dd><p>A character vector of labels for categorical predictors.
If <code>NULL</code>, the default, the factor labels are used.</p></dd>


<dt>main.title</dt>
<dd><p>A character object that will be used as an overall title
for the plot. If <code>NULL</code>, no main title is used.</p></dd>


<dt>colors</dt>
<dd><p>See <a href="jtools_colors.html">jtools_colors</a> for details on the types of arguments
accepted. Default is "black". This affects the coloration of the line
as well as confidence intervals and points unless you give a different
argument to <code>line.color</code>.</p></dd>


<dt>line.colors</dt>
<dd><p>See <a href="jtools_colors.html">jtools_colors</a> for details on the types of arguments
accepted. Default is <code>colors</code>. This affects the coloration of the line
as well as confidence intervals, but not the points.</p></dd>


<dt>line.thickness</dt>
<dd><p>How thick should the plotted lines be? Default is 1.1;
ggplot's default is 1.</p></dd>


<dt>point.size</dt>
<dd><p>What size should be used for observed data when
<code>plot.points</code> is TRUE? Default is 1.5.</p></dd>


<dt>point.alpha</dt>
<dd><p>What should the <code>alpha</code> aesthetic for plotted points of
observed data be? Default is 0.6, and it can range from 0 (transparent) to
1 (opaque).</p></dd>


<dt>jitter</dt>
<dd><p>How much should <code>plot.points</code> observed values be "jittered"
via <code><a href="https://ggplot2.tidyverse.org/reference/position_jitter.html" class="external-link">ggplot2::position_jitter()</a></code>? When there are many points near each
other, jittering moves them a small amount to keep them from
totally overlapping. In some cases, though, it can add confusion since
it may make points appear to be outside the boundaries of observed
values or cause other visual issues. Default is 0, but try various
small values (e.g., 0.1) and increase as needed if your points are
overlapping too much. If the argument is a vector with two values,
then the first is assumed to be the jitter for width and the second
for the height.</p></dd>


<dt>rug</dt>
<dd><p>Show a rug plot in the margins? This uses <code><a href="https://ggplot2.tidyverse.org/reference/geom_rug.html" class="external-link">ggplot2::geom_rug()</a></code>
to show the distribution of the predictor (top/bottom) and/or
response variable (left/right) in the original data. Default is
FALSE.</p></dd>


<dt>rug.sides</dt>
<dd><p>On which sides should rug plots appear? Default is "lb",
meaning both left and bottom. "t" and/or "b" show the distribution of
the predictor
while "l" and/or "r" show the distribution of the response.</p></dd>


<dt>force.cat</dt>
<dd><p>Force the continuous <code>pred</code> to be treated as categorical?
default is FALSE, but this can be useful for things like dummy 0/1
variables.</p></dd>


<dt>cat.geom</dt>
<dd><p>If <code>pred</code> is categorical (or <code>force.cat</code> is TRUE),
what type of plot should this be? There are several options
here since the best way to visualize categorical interactions varies by
context. Here are the options:</p><ul><li><p><code>"point"</code>: The default. Simply plot the point estimates. You may want to
use <code>point.shape = TRUE</code> with this and you should also consider
<code>interval = TRUE</code> to visualize uncertainty.</p></li>
<li><p><code>"line"</code>: This connects observations across levels of the <code>pred</code>
variable with a line. This is a good option when the <code>pred</code> variable
is ordinal (ordered). You may still consider <code>point.shape = TRUE</code> and
<code>interval = TRUE</code> is still a good idea.</p></li>
<li><p><code>"bar"</code>: A bar chart. Some call this a "dynamite plot."
Many applied researchers advise against this type of plot because it
does not represent the distribution of the observed data or the
uncertainty of the predictions very well. It is best to at least use the
<code>interval = TRUE</code> argument with this geom.</p></li>
</ul></dd>


<dt>cat.interval.geom</dt>
<dd><p>For categorical by categorical interactions.
One of "errorbar" or "linerange". If the former,
<code><a href="https://ggplot2.tidyverse.org/reference/geom_linerange.html" class="external-link">ggplot2::geom_errorbar()</a></code> is used. If the latter,
<code><a href="https://ggplot2.tidyverse.org/reference/geom_linerange.html" class="external-link">ggplot2::geom_linerange()</a></code> is used.</p></dd>


<dt>cat.pred.point.size</dt>
<dd><p>(for categorical <code>pred</code>)
If TRUE and <code>geom</code> is <code>"point"</code> or <code>"line"</code>,
sets the size of the predicted points. Default is 3.5.
Note the distinction from <code>point.size</code>, which refers to the
observed data points.</p></dd>


<dt>partial.residuals</dt>
<dd><p>Instead of plotting the observed data, you may plot
the partial residuals (controlling for the effects of variables besides
<code>pred</code>).</p></dd>


<dt>color.class</dt>
<dd><p>Deprecated. Now known as <code>colors</code>.</p></dd>


<dt>...</dt>
<dd><p>extra arguments passed to <code><a href="make_predictions.html">make_predictions()</a></code></p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>The functions returns a <code>ggplot</code> object, which can be treated
like
a user-created plot and expanded upon as such.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This function provides a means for plotting effects for the
purpose of exploring regression estimates. You must have the
package <code>ggplot2</code> installed to benefit from these plotting functions.</p>
<p>By default, all numeric predictors other than the one specified in the
<code>pred</code> argument are mean-centered, which usually produces more
intuitive plots. This only affects the y-axis in linear models, but
may be especially important/influential in non-linear/generalized linear
models.</p>
<p>This function supports nonlinear and generalized linear models and by
default will plot them on
their original scale (<code>outcome.scale = "response"</code>).</p>
<p>While mixed effects models from <code>lme4</code> are supported, only the fixed
effects are plotted. <code>lme4</code> does not provide confidence intervals,
so they are not supported with this function either.</p>
<p>Note: to use transformed predictors, e.g., <code>log(x)</code>, or polynomials,
e.g., <code>poly(x, 2)</code>, provide the raw variable name (<code>x</code>) to the <code>pred =</code>
argument. You will need to input the data frame used to fit the model with
the <code>data =</code> argument.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code>interact_plot</code> from the <code>interactions</code> package plots interaction
effects,
producing plots like this function but with separate lines for different
levels of a moderator. <code>cat_plot</code> from <code>interactions</code> does the same
for categorical by categorical interactions.</p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Jacob Long <a href="mailto:jacob.long@sc.edu">jacob.long@sc.edu</a></p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Using a fitted lm model</span></span></span>
<span class="r-in"><span><span class="va">states</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="va">state.x77</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">states</span><span class="op">$</span><span class="va">HSGrad</span> <span class="op">&lt;-</span> <span class="va">states</span><span class="op">$</span><span class="va">`HS Grad`</span></span></span>
<span class="r-in"><span><span class="va">fit</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">Income</span> <span class="op">~</span> <span class="va">HSGrad</span> <span class="op">+</span> <span class="va">Murder</span>,</span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">states</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">effect_plot</span><span class="op">(</span>model <span class="op">=</span> <span class="va">fit</span>, pred <span class="op">=</span> <span class="va">Murder</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="effect_plot-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Using polynomial predictor, plus intervals</span></span></span>
<span class="r-in"><span><span class="va">fit</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">accel</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/stats/poly.html" class="external-link">poly</a></span><span class="op">(</span><span class="va">mag</span>,<span class="fl">3</span><span class="op">)</span> <span class="op">+</span> <span class="va">dist</span>, data <span class="op">=</span> <span class="va">attenu</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">effect_plot</span><span class="op">(</span><span class="va">fit</span>, pred <span class="op">=</span> <span class="va">mag</span>, interval <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>  int.type <span class="op">=</span> <span class="st">"confidence"</span>, int.width <span class="op">=</span> <span class="fl">.8</span>, data <span class="op">=</span> <span class="va">attenu</span><span class="op">)</span> <span class="co"># note data arg.</span></span></span>
<span class="r-plt img"><img src="effect_plot-2.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># With svyglm</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/ns-load.html" class="external-link">requireNamespace</a></span><span class="op">(</span><span class="st">"survey"</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://r-survey.r-forge.r-project.org/survey/" class="external-link">survey</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">api</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">dstrat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/survey/man/svydesign.html" class="external-link">svydesign</a></span><span class="op">(</span>id <span class="op">=</span> <span class="op">~</span><span class="fl">1</span>, strata <span class="op">=</span> <span class="op">~</span><span class="va">stype</span>, weights <span class="op">=</span> <span class="op">~</span><span class="va">pw</span>,</span></span>
<span class="r-in"><span>                    data <span class="op">=</span> <span class="va">apistrat</span>, fpc <span class="op">=</span> <span class="op">~</span><span class="va">fpc</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">regmodel</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/survey/man/svyglm.html" class="external-link">svyglm</a></span><span class="op">(</span><span class="va">api00</span> <span class="op">~</span> <span class="va">ell</span> <span class="op">+</span> <span class="va">meals</span>, design <span class="op">=</span> <span class="va">dstrat</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">effect_plot</span><span class="op">(</span><span class="va">regmodel</span>, pred <span class="op">=</span> <span class="va">ell</span>, interval <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-plt img"><img src="effect_plot-3.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># With lme4</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/lme4/lme4/" class="external-link">lme4</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">VerbAgg</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">mv</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/lme4/man/glmer.html" class="external-link">glmer</a></span><span class="op">(</span><span class="va">r2</span> <span class="op">~</span> <span class="va">Anger</span> <span class="op">+</span> <span class="va">mode</span> <span class="op">+</span> <span class="op">(</span><span class="fl">1</span> <span class="op">|</span> <span class="va">item</span><span class="op">)</span>, data <span class="op">=</span> <span class="va">VerbAgg</span>,</span></span>
<span class="r-in"><span>            family <span class="op">=</span> <span class="va">binomial</span>,</span></span>
<span class="r-in"><span>            control <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/lme4/man/lmerControl.html" class="external-link">glmerControl</a></span><span class="op">(</span><span class="st">"bobyqa"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">effect_plot</span><span class="op">(</span><span class="va">mv</span>, pred <span class="op">=</span> <span class="va">Anger</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Jacob A. Long.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

