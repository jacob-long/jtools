<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="gscale standardizes variables by dividing them by 2 standard
deviations and mean-centering them by default. It contains options for
handling binary variables separately. gscale() is a fork of
rescale from the arm package---the key feature
difference is that gscale() will perform the same functions for
variables in svydesign objects. gscale() is
also more user-friendly in that it is more flexible in how it accepts input."><title>Scale and/or center data, including survey designs — gscale • jtools</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><link href="../deps/_Lato-0.4.1/font.css" rel="stylesheet"><link href="../deps/_IBM%20Plex%20Mono-0.4.1/font.css" rel="stylesheet"><link href="../deps/_Raleway-0.4.1/font.css" rel="stylesheet"><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Scale and/or center data, including survey designs — gscale"><meta property="og:description" content="gscale standardizes variables by dividing them by 2 standard
deviations and mean-centering them by default. It contains options for
handling binary variables separately. gscale() is a fork of
rescale from the arm package---the key feature
difference is that gscale() will perform the same functions for
variables in svydesign objects. gscale() is
also more user-friendly in that it is more flexible in how it accepts input."><meta property="og:image" content="/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">jtools</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.2.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">
    <span class="fa fa-newspaper-o"></span>
     
    News
  </a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">
    <span class="fa fa-file-code-o"></span>
     
    Documentation
  </a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown--vignettes">
    <span class="fa fa-book"></span>
     
    Vignettes
  </a>
  <div class="dropdown-menu" aria-labelledby="dropdown--vignettes">
    <a class="dropdown-item" href="../articles/summ.html">Tools for summarizing and visualizing regression models</a>
    <a class="dropdown-item" href="../articles/effect_plot.html">Visualizing regression model predictions</a>
    <a class="dropdown-item" href="../articles/svycor.html">Calculate correlations and correlation tables with complex survey data</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/jacob-long/jtools">
    <span class="fa fa-github fa-lg"></span>
     
    Github
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Scale and/or center data, including survey designs</h1>
      <small class="dont-index">Source: <a href="https://github.com/jacob-long/jtools/blob/HEAD/R/gscale.R" class="external-link"><code>R/gscale.R</code></a></small>
      <div class="d-none name"><code>gscale.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>gscale</code> standardizes variables by dividing them by 2 standard
deviations and mean-centering them by default. It contains options for
handling binary variables separately. <code>gscale()</code> is a fork of
<code>rescale</code> from the <code>arm</code> package---the key feature
difference is that <code>gscale()</code> will perform the same functions for
variables in <code><a href="https://rdrr.io/pkg/survey/man/svydesign.html" class="external-link">svydesign</a></code> objects. <code>gscale()</code> is
also more user-friendly in that it is more flexible in how it accepts input.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">gscale</span><span class="op">(</span>
  data <span class="op">=</span> <span class="cn">NULL</span>,
  vars <span class="op">=</span> <span class="cn">NULL</span>,
  binary.inputs <span class="op">=</span> <span class="st">"center"</span>,
  binary.factors <span class="op">=</span> <span class="cn">FALSE</span>,
  n.sd <span class="op">=</span> <span class="fl">2</span>,
  center.only <span class="op">=</span> <span class="cn">FALSE</span>,
  scale.only <span class="op">=</span> <span class="cn">FALSE</span>,
  weights <span class="op">=</span> <span class="cn">NULL</span>,
  apply.weighted.contrasts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"jtools-weighted.contrasts"</span>, <span class="cn">FALSE</span><span class="op">)</span>,
  x <span class="op">=</span> <span class="cn">NULL</span>,
  messages <span class="op">=</span> <span class="cn">FALSE</span>
<span class="op">)</span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>data</dt>
<dd><p>A data frame or survey design. Only needed if you would like to
rescale multiple variables at once. If <code>x = NULL</code>, all columns will
be rescaled. Otherwise, <code>x</code> should be a vector of variable names. If
<code>x</code> is a numeric vector, this argument is ignored.</p></dd>
<dt>vars</dt>
<dd><p>If <code>data</code> is a data.frame or similar, you can scale only
select columns by providing a vector column names to this argument.</p></dd>
<dt>binary.inputs</dt>
<dd><p>Options for binary variables. Default is <code>center</code>;
<code>0/1</code> keeps original scale; <code>-0.5/0.5</code> rescales 0 as -0.5 and 1
as 0.5; <code>center</code> subtracts the mean; and <code>full</code> subtracts the
mean and divides by 2 sd.</p></dd>
<dt>binary.factors</dt>
<dd><p>Coerce two-level factors to numeric and apply scaling
functions to them? Default is FALSE.</p></dd>
<dt>n.sd</dt>
<dd><p>By how many standard deviations should the variables be divided
by? Default for <code>gscale</code> is 2, like <code>arm</code>'s <code>rescale</code>.
1 is the more typical standardization scheme.</p></dd>
<dt>center.only</dt>
<dd><p>A logical value indicating whether you would like to mean
-center the values, but not scale them.</p></dd>
<dt>scale.only</dt>
<dd><p>A logical value indicating whether you would like to scale
the values, but not mean-center them.</p></dd>
<dt>weights</dt>
<dd><p>A vector of weights equal in length to <code>x</code>. If iterating
over a data frame, the weights will need to be equal in length to all the
columns to avoid errors. You may need to remove missing values before using
the weights.</p></dd>
<dt>apply.weighted.contrasts</dt>
<dd><p>Factor variables cannot be scaled, but you
can set the contrasts such that the intercept in a regression model will
reflect the true mean (assuming all other variables are centered). If set
to TRUE, the argument will apply weighted effects coding to all factors.
This is similar to the R default effects coding, but weights according to
how many observations are at each level. An adapted version of
<code>contr.wec()</code> from the <code>wec</code> package is used to do this. See
that package's documentation and/or Grotenhuis et al. (2016) for more
info.</p></dd>
<dt>x</dt>
<dd><p>Deprecated. Pass numeric vectors to <code>data</code>. Pass vectors of column
names to <code>vars</code>.</p></dd>
<dt>messages</dt>
<dd><p>Print messages when variables are not processed due to
being non-numeric or all missing? Default is FALSE.</p></dd>
</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This function is adapted from the <code>rescale</code> function of
the <code>arm</code> package. It is named <code>gscale()</code> after the
popularizer of this scaling method, Andrew <strong>G</strong>elman. By default, it
works just like <code>rescale</code>. But it contains many additional options and
can also accept multiple types of input without breaking a sweat.</p>
<p>Only numeric variables are altered when in a data.frame or survey design.
Character variables, factors, etc. are skipped.</p>
<p>For those dealing with survey data, if you provide a <code>survey.design</code>
object you can rest assured that the mean-centering and scaling is performed
with help from the <code><a href="https://rdrr.io/pkg/survey/man/surveysummary.html" class="external-link">svymean()</a></code> and
<code><a href="https://rdrr.io/pkg/survey/man/surveysummary.html" class="external-link">svyvar()</a></code> functions, respectively. It was among the
primary motivations for creating this function. <code>gscale()</code> will not
center or scale the weights variables defined in the survey design unless
the user specifically requests them in the <code>x =</code> argument.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Gelman, A. (2008). Scaling regression inputs by dividing by two standard
deviations. <em>Statistics in Medicine</em>, <em>27</em>, 2865–2873.
<a href="http://www.stat.columbia.edu/~gelman/research/published/standardizing7.pdf" class="external-link">http://www.stat.columbia.edu/~gelman/research/published/standardizing7.pdf</a></p>
<p>Grotenhuis, M. te, Pelzer, B., Eisinga, R., Nieuwenhuis, R.,
Schmidt-Catran, A., &amp; Konig, R. (2017). When size matters: Advantages of
weighted effect coding in observational studies. <em>International Journal of
Public Health</em>, <em>62</em>, 163–167. https://doi.org/10.1007/s00038-016-0901-1 (
open access)</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="summ.html">j_summ</a></code> is a replacement for the <code>summary</code> function for
regression models. On request, it will center and/or standardize variables
before printing its output.</p>
<p>Other standardization: 
<code><a href="center_mod.html">center_mod</a>()</code>,
<code><a href="center.html">center</a>()</code>,
<code><a href="scale_mod.html">scale_mod</a>()</code>,
<code><a href="standardize.html">standardize</a>()</code></p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Jacob Long <a href="mailto:jacob.long@sc.edu">jacob.long@sc.edu</a></p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"></span>
<span class="r-in"><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">2</span>, <span class="fl">1</span><span class="op">)</span></span>
<span class="r-in"><span class="va">x2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Binomial.html" class="external-link">rbinom</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">1</span>, <span class="fl">.5</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Basic use</span></span>
<span class="r-in"><span class="fu">gscale</span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] -0.4955337 -0.5149825  0.2890136 -0.6975175 -0.3272110  0.3005639</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [7] -0.1735107  0.6471708  0.6448106  0.3271965</span>
<span class="r-in"><span class="co"># Normal standardization</span></span>
<span class="r-in"><span class="fu">gscale</span><span class="op">(</span><span class="va">x</span>, n.sd <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] -0.9910673 -1.0299650  0.5780271 -1.3950350 -0.6544221  0.6011278</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [7] -0.3470213  1.2943416  1.2896211  0.6543931</span>
<span class="r-in"><span class="co"># Scale only</span></span>
<span class="r-in"><span class="fu">gscale</span><span class="op">(</span><span class="va">x</span>, scale.only <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] 0.4528146 0.4333657 1.2373618 0.2508308 0.6211372 1.2489121 0.7748376</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [8] 1.5955190 1.5931588 1.2755448</span>
<span class="r-in"><span class="co"># Center only</span></span>
<span class="r-in"><span class="fu">gscale</span><span class="op">(</span><span class="va">x</span>, center.only <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] -0.8727390 -0.9069925  0.5090137 -1.2284750 -0.5762875  0.5293563</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [7] -0.3055888  1.1398039  1.1356470  0.5762619</span>
<span class="r-in"><span class="co"># Binary inputs</span></span>
<span class="r-in"><span class="fu">gscale</span><span class="op">(</span><span class="va">x2</span>, binary.inputs <span class="op">=</span> <span class="st">"0/1"</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] 0 1 1 0 1 1 1 1 0 1</span>
<span class="r-in"><span class="fu">gscale</span><span class="op">(</span><span class="va">x2</span>, binary.inputs <span class="op">=</span> <span class="st">"full"</span><span class="op">)</span> <span class="co"># treats it like a continous var</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] -0.7245688  0.3105295  0.3105295 -0.7245688  0.3105295  0.3105295</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [7]  0.3105295  0.3105295 -0.7245688  0.3105295</span>
<span class="r-in"><span class="fu">gscale</span><span class="op">(</span><span class="va">x2</span>, binary.inputs <span class="op">=</span> <span class="st">"-0.5/0.5"</span><span class="op">)</span> <span class="co"># keep scale, center at zero</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] -0.5  0.5  0.5 -0.5  0.5  0.5  0.5  0.5 -0.5  0.5</span>
<span class="r-in"><span class="fu">gscale</span><span class="op">(</span><span class="va">x2</span>, binary.inputs <span class="op">=</span> <span class="st">"center"</span><span class="op">)</span> <span class="co"># mean center it</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] -0.7  0.3  0.3 -0.7  0.3  0.3  0.3  0.3 -0.7  0.3</span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Data frame as input</span></span>
<span class="r-in"><span class="co"># loops through each numeric column</span></span>
<span class="r-in"><span class="fu">gscale</span><span class="op">(</span>data <span class="op">=</span> <span class="va">mtcars</span>, binary.inputs <span class="op">=</span> <span class="st">"-0.5/0.5"</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                             mpg        cyl        disp          hp        drat</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Mazda RX4            0.07544241 -0.0524939 -0.28530991 -0.26754642  0.28375684</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Mazda RX4 Wag        0.07544241 -0.0524939 -0.28530991 -0.26754642  0.28375684</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Datsun 710           0.22477172 -0.6124289 -0.49509105 -0.39152023  0.23699979</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Hornet 4 Drive       0.10862670 -0.0524939  0.11004685 -0.26754642 -0.48305877</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Hornet Sportabout   -0.11536726  0.5074411  0.52154061  0.20647109 -0.41759890</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Valiant             -0.16514370 -0.0524939 -0.02308349 -0.30400931 -0.78230388</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Duster 360          -0.48039447  0.5074411  0.52154061  0.71695148 -0.36149044</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 240D            0.35750889 -0.6124289 -0.33896547 -0.61759012  0.08737724</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 230             0.22477172 -0.6124289 -0.36276756 -0.37693508  0.30245966</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 280            -0.07388690 -0.0524939 -0.25464959 -0.17274292  0.30245966</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 280C           -0.19003192 -0.0524939 -0.25464959 -0.17274292  0.30245966</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 450SE          -0.30617694  0.5074411  0.18185654  0.24293397 -0.49241018</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 450SL          -0.23151228  0.5074411  0.18185654  0.24293397 -0.49241018</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 450SLC         -0.40572981  0.5074411  0.18185654  0.24293397 -0.49241018</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Cadillac Fleetwood  -0.80394131  0.5074411  0.97337691  0.42524840 -0.62332991</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Lincoln Continental -0.80394131  0.5074411  0.92496588  0.49817417 -0.55787004</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chrysler Imperial   -0.44721018  0.5074411  0.84428082  0.60756282 -0.34278762</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Fiat 128             1.02119472 -0.6124289 -0.61329465 -0.58841981  0.45208222</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Honda Civic          0.85527326 -0.6124289 -0.62539740 -0.69051589  1.24695206</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Toyota Corolla       1.14563581 -0.6124289 -0.64395497 -0.59571239  0.58300196</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Toyota Corona        0.11692278 -0.6124289 -0.44627659 -0.36234992  0.09672865</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Dodge Challenger    -0.38084159  0.5074411  0.35210200  0.02415666 -0.78230388</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> AMC Javelin         -0.40572981  0.5074411  0.29562247  0.02415666 -0.41759890</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Camaro Z28          -0.56335520  0.5074411  0.48119809  0.71695148  0.12478288</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Pontiac Firebird    -0.07388690  0.5074411  0.68291072  0.20647109 -0.48305877</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Fiat X1-9            0.59809500 -0.6124289 -0.61208437 -0.58841981  0.45208222</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Porsche 914-2        0.49024605 -0.6124289 -0.44546974 -0.40610538  0.77938156</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Lotus Europa         0.85527326 -0.6124289 -0.54713290 -0.24566869  0.16218851</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Ford Pantera L      -0.35595337  0.5074411  0.48523234  0.85551044  0.58300196</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Ferrari Dino        -0.03240653 -0.0524939 -0.34582370  0.20647109  0.02191737</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Maserati Bora       -0.42232196  0.5074411  0.28351971  1.37328341 -0.05289391</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Volvo 142E           0.10862670 -0.6124289 -0.44264576 -0.27483900  0.48013645</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                               wt         qsec   vs   am       gear        carb</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Mazda RX4           -0.305199784 -0.388582573 -0.5  0.5  0.2117771  0.36760154</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Mazda RX4 Wag       -0.174892635 -0.231890410 -0.5  0.5  0.2117771  0.36760154</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Datsun 710          -0.458502312  0.213003408  0.5  0.5  0.2117771 -0.56107604</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Hornet 4 Drive      -0.001149769  0.445243578  0.5 -0.5 -0.4659096 -0.56107604</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Hornet Sportabout    0.113827127 -0.231890410 -0.5 -0.5 -0.4659096 -0.25151684</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Valiant              0.124047296  0.663493376  0.5 -0.5 -0.4659096 -0.56107604</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Duster 360           0.180258223 -0.562063181 -0.5 -0.5 -0.4659096  0.36760154</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 240D           -0.013924980  0.601935740  0.5 -0.5  0.2117771 -0.25151684</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 230            -0.034365317  1.413377296  0.5 -0.5  0.2117771 -0.25151684</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 280             0.113827127  0.126263104  0.5 -0.5  0.2117771  0.36760154</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 280C            0.113827127  0.294147564  0.5 -0.5  0.2117771  0.36760154</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 450SE           0.435762437 -0.125563586 -0.5 -0.5 -0.4659096  0.05804235</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 450SL           0.262019572 -0.069602099 -0.5 -0.5 -0.4659096  0.05804235</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 450SLC          0.287569993  0.042320874 -0.5 -0.5 -0.4659096  0.05804235</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Cadillac Fleetwood   1.038752382  0.036724726 -0.5 -0.5 -0.4659096  0.36760154</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Lincoln Continental  1.127667849 -0.008044464 -0.5 -0.5 -0.4659096  0.36760154</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chrysler Imperial    1.087298183 -0.119967437 -0.5 -0.5 -0.4659096  0.36760154</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Fiat 128            -0.519823324  0.453637801  0.5  0.5  0.2117771 -0.56107604</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Honda Civic         -0.818763254  0.187820739  0.5  0.5  0.2117771 -0.25151684</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Toyota Corolla      -0.706341400  0.573954997  0.5  0.5  0.2117771 -0.56107604</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Toyota Corona       -0.384406090  0.604733815  0.5 -0.5 -0.4659096 -0.56107604</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Dodge Challenger     0.154707802 -0.273861525 -0.5 -0.5 -0.4659096 -0.25151684</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> AMC Javelin          0.111272085 -0.153544329 -0.5 -0.5 -0.4659096 -0.25151684</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Camaro Z28           0.318230499 -0.682380377 -0.5 -0.5 -0.4659096  0.36760154</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Pontiac Firebird     0.320785541 -0.223496187 -0.5 -0.5 -0.4659096 -0.25151684</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Fiat X1-9           -0.655240557  0.294147564  0.5  0.5  0.2117771 -0.56107604</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Porsche 914-2       -0.550483829 -0.321428789 -0.5  0.5  0.8894638 -0.25151684</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Lotus Europa        -0.870886114 -0.265467302  0.5  0.5  0.8894638 -0.25151684</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Ford Pantera L      -0.024145148 -0.937005142 -0.5  0.5  0.8894638  0.36760154</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Ferrari Dino        -0.228548520 -0.657197709 -0.5  0.5  0.8894638  0.98671992</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Maserati Bora        0.180258223 -0.909024398 -0.5  0.5  0.8894638  1.60583831</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Volvo 142E          -0.223438435  0.210205334  0.5  0.5  0.2117771 -0.25151684</span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Specified vars in data frame</span></span>
<span class="r-in"><span class="fu">gscale</span><span class="op">(</span><span class="va">mtcars</span>, vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"hp"</span>, <span class="st">"wt"</span>, <span class="st">"vs"</span><span class="op">)</span>, binary.inputs <span class="op">=</span> <span class="st">"center"</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                      mpg cyl  disp          hp drat           wt  qsec      vs</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Mazda RX4           21.0   6 160.0 -0.26754642 3.90 -0.305199784 16.46 -0.4375</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Mazda RX4 Wag       21.0   6 160.0 -0.26754642 3.90 -0.174892635 17.02 -0.4375</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Datsun 710          22.8   4 108.0 -0.39152023 3.85 -0.458502312 18.61  0.5625</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Hornet 4 Drive      21.4   6 258.0 -0.26754642 3.08 -0.001149769 19.44  0.5625</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Hornet Sportabout   18.7   8 360.0  0.20647109 3.15  0.113827127 17.02 -0.4375</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Valiant             18.1   6 225.0 -0.30400931 2.76  0.124047296 20.22  0.5625</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Duster 360          14.3   8 360.0  0.71695148 3.21  0.180258223 15.84 -0.4375</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 240D           24.4   4 146.7 -0.61759012 3.69 -0.013924980 20.00  0.5625</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 230            22.8   4 140.8 -0.37693508 3.92 -0.034365317 22.90  0.5625</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 280            19.2   6 167.6 -0.17274292 3.92  0.113827127 18.30  0.5625</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 280C           17.8   6 167.6 -0.17274292 3.92  0.113827127 18.90  0.5625</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 450SE          16.4   8 275.8  0.24293397 3.07  0.435762437 17.40 -0.4375</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 450SL          17.3   8 275.8  0.24293397 3.07  0.262019572 17.60 -0.4375</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 450SLC         15.2   8 275.8  0.24293397 3.07  0.287569993 18.00 -0.4375</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Cadillac Fleetwood  10.4   8 472.0  0.42524840 2.93  1.038752382 17.98 -0.4375</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Lincoln Continental 10.4   8 460.0  0.49817417 3.00  1.127667849 17.82 -0.4375</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chrysler Imperial   14.7   8 440.0  0.60756282 3.23  1.087298183 17.42 -0.4375</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Fiat 128            32.4   4  78.7 -0.58841981 4.08 -0.519823324 19.47  0.5625</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Honda Civic         30.4   4  75.7 -0.69051589 4.93 -0.818763254 18.52  0.5625</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Toyota Corolla      33.9   4  71.1 -0.59571239 4.22 -0.706341400 19.90  0.5625</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Toyota Corona       21.5   4 120.1 -0.36234992 3.70 -0.384406090 20.01  0.5625</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Dodge Challenger    15.5   8 318.0  0.02415666 2.76  0.154707802 16.87 -0.4375</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> AMC Javelin         15.2   8 304.0  0.02415666 3.15  0.111272085 17.30 -0.4375</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Camaro Z28          13.3   8 350.0  0.71695148 3.73  0.318230499 15.41 -0.4375</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Pontiac Firebird    19.2   8 400.0  0.20647109 3.08  0.320785541 17.05 -0.4375</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Fiat X1-9           27.3   4  79.0 -0.58841981 4.08 -0.655240557 18.90  0.5625</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Porsche 914-2       26.0   4 120.3 -0.40610538 4.43 -0.550483829 16.70 -0.4375</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Lotus Europa        30.4   4  95.1 -0.24566869 3.77 -0.870886114 16.90  0.5625</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Ford Pantera L      15.8   8 351.0  0.85551044 4.22 -0.024145148 14.50 -0.4375</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Ferrari Dino        19.7   6 145.0  0.20647109 3.62 -0.228548520 15.50 -0.4375</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Maserati Bora       15.0   8 301.0  1.37328341 3.54  0.180258223 14.60 -0.4375</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Volvo 142E          21.4   4 121.0 -0.27483900 4.11 -0.223438435 18.60  0.5625</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                     am gear carb</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Mazda RX4            1    4    4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Mazda RX4 Wag        1    4    4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Datsun 710           1    4    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Hornet 4 Drive       0    3    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Hornet Sportabout    0    3    2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Valiant              0    3    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Duster 360           0    3    4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 240D            0    4    2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 230             0    4    2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 280             0    4    4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 280C            0    4    4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 450SE           0    3    3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 450SL           0    3    3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 450SLC          0    3    3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Cadillac Fleetwood   0    3    4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Lincoln Continental  0    3    4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chrysler Imperial    0    3    4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Fiat 128             1    4    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Honda Civic          1    4    2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Toyota Corolla       1    4    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Toyota Corona        0    3    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Dodge Challenger     0    3    2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> AMC Javelin          0    3    2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Camaro Z28           0    3    4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Pontiac Firebird     0    3    2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Fiat X1-9            1    4    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Porsche 914-2        1    5    2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Lotus Europa         1    5    2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Ford Pantera L       1    5    4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Ferrari Dino         1    5    6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Maserati Bora        1    5    8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Volvo 142E           1    4    2</span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Weighted inputs</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">wts</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span></span>
<span class="r-in"><span class="fu">gscale</span><span class="op">(</span><span class="va">x</span>, weights <span class="op">=</span> <span class="va">wts</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] -0.78495579 -0.80684729  0.09812547 -1.01230746 -0.59549295  0.11112646</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [7] -0.42248879  0.50126491  0.49860825  0.14110396</span>
<span class="r-in"><span class="co"># If using a weights column of data frame, give its name</span></span>
<span class="r-in"><span class="va">mtcars</span><span class="op">$</span><span class="va">weights</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">32</span>, <span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span></span>
<span class="r-in"><span class="fu">gscale</span><span class="op">(</span><span class="va">mtcars</span>, weights <span class="op">=</span> <span class="va">weights</span><span class="op">)</span> <span class="co"># will skip over mtcars$weights</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                              mpg        cyl        disp          hp        drat</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Mazda RX4            0.091775277 -0.1073136 -0.33589947 -0.30877065  0.31260243</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Mazda RX4 Wag        0.091775277 -0.1073136 -0.33589947 -0.30877065  0.31260243</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Datsun 710           0.231996433 -0.6427030 -0.54494842 -0.42573963  0.26735915</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Hornet 4 Drive       0.122935534 -0.1073136  0.05807738 -0.30877065 -0.42938737</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Hornet Sportabout   -0.087396199  0.4280758  0.46813492  0.13846368 -0.36604678</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Valiant             -0.134136585 -0.1073136 -0.07458830 -0.34317329 -0.71894436</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Duster 360          -0.430159024  0.4280758  0.46813492  0.62010065 -0.31175484</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 240D            0.356637460 -0.6427030 -0.38936776 -0.63903600  0.12258065</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 230             0.231996433 -0.6427030 -0.41308678 -0.41197857  0.33069974</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 280            -0.048445878 -0.1073136 -0.30534617 -0.21932378  0.33069974</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 280C           -0.157506777 -0.1073136 -0.30534617 -0.21932378  0.33069974</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 450SE          -0.266567676  0.4280758  0.12963644  0.17286632 -0.43843602</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 450SL          -0.196457098  0.4280758  0.12963644  0.17286632 -0.43843602</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 450SLC         -0.360048447  0.4280758  0.12963644  0.17286632 -0.43843602</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Cadillac Fleetwood  -0.733971529  0.4280758  0.91839419  0.34487952 -0.56511721</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Lincoln Continental -0.733971529  0.4280758  0.87015212  0.41368481 -0.50177662</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chrysler Imperial   -0.398998768  0.4280758  0.78974868  0.51689273 -0.29365753</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Fiat 128             0.979842597 -0.6427030 -0.66273946 -0.61151389  0.47547824</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Honda Civic          0.824041313 -0.6427030 -0.67479997 -0.70784128  1.24461401</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Toyota Corolla       1.096693560 -0.6427030 -0.69329276 -0.61839442  0.60215943</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Toyota Corona        0.130725598 -0.6427030 -0.49630434 -0.39821752  0.13162931</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Dodge Challenger    -0.336678254  0.4280758  0.29928770 -0.03354952 -0.71894436</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> AMC Javelin         -0.360048447  0.4280758  0.24300529 -0.03354952 -0.36604678</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Camaro Z28          -0.508059667  0.4280758  0.42793320  0.62010065  0.15877528</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Pontiac Firebird    -0.048445878  0.4280758  0.62894180  0.13846368 -0.42938737</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Fiat X1-9            0.582549322 -0.6427030 -0.66153341 -0.61151389  0.47547824</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Porsche 914-2        0.481278488 -0.6427030 -0.49550030 -0.43950068  0.79218120</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Lotus Europa         0.824041313 -0.6427030 -0.59680864 -0.28812907  0.19496990</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Ford Pantera L      -0.313308061  0.4280758  0.43195338  0.75083068  0.60215943</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Ferrari Dino        -0.009495557 -0.1073136 -0.39620205  0.13846368  0.05924006</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Maserati Bora       -0.375628575  0.4280758  0.23094478  1.23934818 -0.01314919</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Volvo 142E           0.122935534 -0.6427030 -0.49268618 -0.31565118  0.50262421</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                               wt        qsec         vs        am       gear</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Mazda RX4           -0.309636528 -0.32199672 -0.3927954  0.605016  0.2117007</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Mazda RX4 Wag       -0.178887874 -0.18366410 -0.3927954  0.605016  0.2117007</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Datsun 710          -0.463458473  0.20910171  0.6072046  0.605016  0.2117007</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Hornet 4 Drive      -0.004556336  0.41413040  0.6072046 -0.394984 -0.4194795</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Hornet Sportabout    0.110810123 -0.18366410 -0.3927954 -0.394984 -0.4194795</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Valiant              0.121064919  0.60680797  0.6072046 -0.394984 -0.4194795</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Duster 360           0.177466299 -0.47515068 -0.3927954 -0.394984 -0.4194795</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 240D           -0.017374832  0.55246301  0.6072046 -0.394984  0.2117007</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 230            -0.037884424  1.26882833  0.6072046 -0.394984  0.2117007</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 280             0.110810123  0.13252473  0.6072046 -0.394984  0.2117007</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 280C            0.110810123  0.28073824  0.6072046 -0.394984  0.2117007</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 450SE           0.433836208 -0.08979554 -0.3927954 -0.394984 -0.4194795</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 450SL           0.259504670 -0.04039104 -0.3927954 -0.394984 -0.4194795</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 450SLC          0.285141661  0.05841797 -0.3927954 -0.394984 -0.4194795</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Cadillac Fleetwood   1.038869193  0.05347752 -0.3927954 -0.394984 -0.4194795</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Lincoln Continental  1.128085921  0.01395392 -0.3927954 -0.394984 -0.4194795</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chrysler Imperial    1.087579475 -0.08485509 -0.3927954 -0.394984 -0.4194795</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Fiat 128            -0.524987251  0.42154108  0.6072046  0.605016  0.2117007</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Honda Civic         -0.824940044  0.18686968  0.6072046  0.605016  0.2117007</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Toyota Corolla      -0.712137284  0.52776076  0.6072046  0.605016  0.2117007</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Toyota Corona       -0.389111199  0.55493324  0.6072046 -0.394984 -0.4194795</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Dodge Challenger     0.151829308 -0.22071748 -0.3927954 -0.394984 -0.4194795</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> AMC Javelin          0.108246424 -0.11449780 -0.3927954 -0.394984 -0.4194795</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Camaro Z28           0.315906050 -0.58137036 -0.3927954 -0.394984 -0.4194795</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Pontiac Firebird     0.318469749 -0.17625343 -0.3927954 -0.394984 -0.4194795</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Fiat X1-9           -0.660863303  0.28073824  0.6072046  0.605016  0.2117007</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Porsche 914-2       -0.555751640 -0.26271131 -0.3927954  0.605016  0.8428809</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Lotus Europa        -0.877239506 -0.21330681  0.6072046  0.605016  0.8428809</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Ford Pantera L      -0.027629628 -0.80616086 -0.3927954  0.605016  0.8428809</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Ferrari Dino        -0.232725555 -0.55913834 -0.3927954  0.605016  0.8428809</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Maserati Bora        0.177466299 -0.78145861 -0.3927954  0.605016  0.8428809</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Volvo 142E          -0.227598157  0.20663148  0.6072046  0.605016  0.2117007</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                            carb      weights</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Mazda RX4            0.38711641 -1.037048011</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Mazda RX4 Wag        0.38711641 -0.449141169</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Datsun 710          -0.52954327 -0.713013960</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Hornet 4 Drive      -0.52954327 -0.157268056</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Hornet Sportabout   -0.22399004 -0.160598214</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Valiant             -0.52954327 -0.268346115</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Duster 360           0.38711641  0.060171021</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 240D           -0.22399004 -1.103708651</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 230            -0.22399004  0.598048691</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 280             0.38711641 -1.282835079</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 280C            0.38711641 -0.612593211</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 450SE           0.08156319 -0.138345341</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 450SL           0.08156319 -0.792120637</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 450SLC          0.08156319  0.646604946</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Cadillac Fleetwood   0.38711641 -1.062577858</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Lincoln Continental  0.38711641  0.278899636</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chrysler Imperial    0.38711641 -0.572956785</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Fiat 128            -0.52954327 -0.064837200</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Honda Civic         -0.22399004 -0.474961984</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Toyota Corolla      -0.52954327 -0.142959324</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Toyota Corona       -0.52954327 -0.691848838</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Dodge Challenger    -0.22399004  0.462172661</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> AMC Javelin         -0.22399004  0.665200478</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Camaro Z28           0.38711641 -0.066118003</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Pontiac Firebird    -0.22399004 -0.077186108</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Fiat X1-9           -0.52954327  0.041809849</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Porsche 914-2       -0.22399004 -0.484810307</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Lotus Europa        -0.22399004  0.280992498</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Ford Pantera L       0.38711641  0.701443166</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Ferrari Dino         0.99822287 -0.756850068</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Maserati Bora        1.60932933  0.002050878</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Volvo 142E          -0.22399004 -0.535584526</span>
<span class="r-in"><span class="co"># If using a weights column of data frame, can still select variables</span></span>
<span class="r-in"><span class="fu">gscale</span><span class="op">(</span><span class="va">mtcars</span>, vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"hp"</span>, <span class="st">"wt"</span>, <span class="st">"vs"</span><span class="op">)</span>, weights <span class="op">=</span> <span class="va">weights</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                      mpg cyl  disp          hp drat           wt  qsec</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Mazda RX4           21.0   6 160.0 -0.30877065 3.90 -0.309636528 16.46</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Mazda RX4 Wag       21.0   6 160.0 -0.30877065 3.90 -0.178887874 17.02</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Datsun 710          22.8   4 108.0 -0.42573963 3.85 -0.463458473 18.61</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Hornet 4 Drive      21.4   6 258.0 -0.30877065 3.08 -0.004556336 19.44</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Hornet Sportabout   18.7   8 360.0  0.13846368 3.15  0.110810123 17.02</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Valiant             18.1   6 225.0 -0.34317329 2.76  0.121064919 20.22</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Duster 360          14.3   8 360.0  0.62010065 3.21  0.177466299 15.84</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 240D           24.4   4 146.7 -0.63903600 3.69 -0.017374832 20.00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 230            22.8   4 140.8 -0.41197857 3.92 -0.037884424 22.90</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 280            19.2   6 167.6 -0.21932378 3.92  0.110810123 18.30</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 280C           17.8   6 167.6 -0.21932378 3.92  0.110810123 18.90</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 450SE          16.4   8 275.8  0.17286632 3.07  0.433836208 17.40</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 450SL          17.3   8 275.8  0.17286632 3.07  0.259504670 17.60</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 450SLC         15.2   8 275.8  0.17286632 3.07  0.285141661 18.00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Cadillac Fleetwood  10.4   8 472.0  0.34487952 2.93  1.038869193 17.98</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Lincoln Continental 10.4   8 460.0  0.41368481 3.00  1.128085921 17.82</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chrysler Imperial   14.7   8 440.0  0.51689273 3.23  1.087579475 17.42</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Fiat 128            32.4   4  78.7 -0.61151389 4.08 -0.524987251 19.47</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Honda Civic         30.4   4  75.7 -0.70784128 4.93 -0.824940044 18.52</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Toyota Corolla      33.9   4  71.1 -0.61839442 4.22 -0.712137284 19.90</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Toyota Corona       21.5   4 120.1 -0.39821752 3.70 -0.389111199 20.01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Dodge Challenger    15.5   8 318.0 -0.03354952 2.76  0.151829308 16.87</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> AMC Javelin         15.2   8 304.0 -0.03354952 3.15  0.108246424 17.30</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Camaro Z28          13.3   8 350.0  0.62010065 3.73  0.315906050 15.41</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Pontiac Firebird    19.2   8 400.0  0.13846368 3.08  0.318469749 17.05</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Fiat X1-9           27.3   4  79.0 -0.61151389 4.08 -0.660863303 18.90</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Porsche 914-2       26.0   4 120.3 -0.43950068 4.43 -0.555751640 16.70</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Lotus Europa        30.4   4  95.1 -0.28812907 3.77 -0.877239506 16.90</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Ford Pantera L      15.8   8 351.0  0.75083068 4.22 -0.027629628 14.50</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Ferrari Dino        19.7   6 145.0  0.13846368 3.62 -0.232725555 15.50</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Maserati Bora       15.0   8 301.0  1.23934818 3.54  0.177466299 14.60</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Volvo 142E          21.4   4 121.0 -0.31565118 4.11 -0.227598157 18.60</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                             vs am gear carb    weights</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Mazda RX4           -0.3927954  1    4    4 0.15938432</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Mazda RX4 Wag       -0.3927954  1    4    4 0.40890813</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Datsun 710           0.6072046  1    4    1 0.29691327</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Hornet 4 Drive       0.6072046  0    3    1 0.53278710</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Hornet Sportabout   -0.3927954  0    3    2 0.53137369</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Valiant              0.6072046  0    3    1 0.48564252</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Duster 360          -0.3927954  0    3    4 0.62507422</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 240D            0.6072046  0    4    2 0.13109171</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 230             0.6072046  0    4    2 0.85336428</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 280             0.6072046  0    4    4 0.05506553</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 280C            0.6072046  0    4    4 0.33953460</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 450SE          -0.3927954  0    3    3 0.54081842</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 450SL          -0.3927954  0    3    3 0.26333822</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Merc 450SLC         -0.3927954  0    3    3 0.87397289</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Cadillac Fleetwood  -0.3927954  0    3    4 0.14854875</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Lincoln Continental -0.3927954  0    3    4 0.71790865</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Chrysler Imperial   -0.3927954  0    3    4 0.35635738</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Fiat 128             0.6072046  1    4    1 0.57201730</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Honda Civic          0.6072046  1    4    2 0.39794907</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Toyota Corolla       0.6072046  1    4    1 0.53886012</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Toyota Corona        0.6072046  0    3    1 0.30589633</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Dodge Challenger    -0.3927954  0    3    2 0.79569476</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> AMC Javelin         -0.3927954  0    3    2 0.88186535</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Camaro Z28          -0.3927954  0    3    4 0.57147369</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Pontiac Firebird    -0.3927954  0    3    2 0.56677608</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Fiat X1-9            0.6072046  1    4    1 0.61728123</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Porsche 914-2       -0.3927954  1    5    2 0.39376917</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Lotus Europa         0.6072046  1    5    2 0.71879692</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Ford Pantera L      -0.3927954  1    5    4 0.89724774</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Ferrari Dino        -0.3927954  1    5    6 0.27830802</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Maserati Bora       -0.3927954  1    5    8 0.60040643</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Volvo 142E           0.6072046  1    4    2 0.37221920</span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Survey designs</span></span>
<span class="r-in"><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/ns-load.html" class="external-link">requireNamespace</a></span><span class="op">(</span><span class="st">"survey"</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span class="r-in">  <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://r-survey.r-forge.r-project.org/survey/" class="external-link">survey</a></span><span class="op">)</span></span>
<span class="r-in">  <span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">api</span><span class="op">)</span></span>
<span class="r-in">  <span class="co">## Create survey design object</span></span>
<span class="r-in">  <span class="va">dstrat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/survey/man/svydesign.html" class="external-link">svydesign</a></span><span class="op">(</span>id <span class="op">=</span> <span class="op">~</span><span class="fl">1</span>, strata <span class="op">=</span> <span class="op">~</span><span class="va">stype</span>, weights <span class="op">=</span> <span class="op">~</span><span class="va">pw</span>,</span>
<span class="r-in">                       data <span class="op">=</span> <span class="va">apistrat</span>, fpc<span class="op">=</span><span class="op">~</span><span class="va">fpc</span><span class="op">)</span></span>
<span class="r-in">  <span class="co"># Creating test binary variable</span></span>
<span class="r-in">  <span class="va">dstrat</span><span class="op">$</span><span class="va">variables</span><span class="op">$</span><span class="va">binary</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Binomial.html" class="external-link">rbinom</a></span><span class="op">(</span><span class="fl">200</span>, <span class="fl">1</span>, <span class="fl">0.5</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in">  <span class="fu">gscale</span><span class="op">(</span>data <span class="op">=</span> <span class="va">dstrat</span>, binary.inputs <span class="op">=</span> <span class="st">"-0.5/0.5"</span><span class="op">)</span></span>
<span class="r-in">  <span class="fu">gscale</span><span class="op">(</span>data <span class="op">=</span> <span class="va">dstrat</span>, vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"api00"</span>,<span class="st">"meals"</span>,<span class="st">"binary"</span><span class="op">)</span>,</span>
<span class="r-in">         binary.inputs <span class="op">=</span> <span class="st">"-0.5/0.5"</span><span class="op">)</span></span>
<span class="r-in"><span class="op">}</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Stratified Independent Sampling design</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> dstrat &lt;- svydesign(id = ~1, strata = ~stype, weights = ~pw,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                        data = apistrat, fpc=~fpc)</span>
<span class="r-in"></span>
<span class="r-in"></span>
<span class="r-in"></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Jacob A. Long.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

    </footer></div>

  

  

  </body></html>

